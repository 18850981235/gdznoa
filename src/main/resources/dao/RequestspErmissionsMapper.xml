<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dao.sys.requestspErmissionsMapper">
    <resultMap id="BaseResultMap" type="com.beans.RequestspErmissions">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="requesid" property="requesid" jdbcType="INTEGER"/>
        <result column="userid" property="userid" jdbcType="INTEGER"/>
        <result column="muneid" property="muneid" jdbcType="INTEGER"/>
    <association property="sysMenu" javaType="com.beans.SysMenu" column="muneid"
                 select="com.dao.sys.MenuMapper.getMenubyid">
    </association>
</resultMap>
    <insert id="addErmissions">
        INSERT INTO `sys_requestsp_ermissions`
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id!=0">
                `id`,
            </if>
            <if test="requesid!=0">
                `requesid`,
            </if>
            <if test="userid!=0">
                `userid`,
            </if>
            <if test="muneid!=null">
                `muneid`
            </if>

        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id!=0">
                #{id},
            </if>
            <if test="requesid!=null">
                #{requesid},
            </if>
            <if test="userid!=0">
                #{userid},
            </if>
            <if test="muneid!=null">
                #{muneid}
            </if>

        </trim>

    </insert>
    <select id="queryErmissions" resultMap="BaseResultMap">
        SELECT `sys_requestsp_ermissions`.`id`,
        `sys_requestsp_ermissions`.`requesid`,
        `sys_requestsp_ermissions`.`userid`,
        `sys_requestsp_ermissions`.`muneid`
        `sys_menu`.`name`
        FROM `sys_requestsp_ermissions`,`sys_menu`
        <trim prefix="where" suffixOverrides="and">
        <if test="reqid!=0">
            and sys_requestsp_ermissions.`requesid` =#{reqid}
        </if>
        <if test="userid!=0">
            and sys_requestsp_ermissions.`userid` =#{userid}
        </if>
            and `sys_requestsp_ermissions`=`sys_menu`.`id`
        </trim>

    </select>
    <select id="querycount" resultType="int">
        select count(1)
        FROM `sys_requestsp_ermissions`
        <trim prefix="where" suffixOverrides="and">
            <if test="reqid!=0">
                and sys_requestsp_ermissions.`requesid` =#{reqid}
            </if>
            <if test="userid!=null">
                and sys_requestsp_ermissions.`userid` =#{userid}
            </if>

        </trim>
    </select>


    <!--<select id="queryUserbyid" resultType="com.beans.SysUser" parameterType="int">-->
        <!--SELECT `sys_user`.`id`,-->
               <!--`sys_user`.`name`,-->
               <!--`account`,-->
               <!--`password`,-->
               <!--`sex`,-->
               <!--`phone`,-->
               <!--`email`,-->
               <!--`deptid`,-->
               <!--`roleid`,-->
               <!--`sys_dept`.`name` AS dept,-->
               <!--`sys_role`.`name` AS role,-->
               <!--`createtime`-->
        <!--FROM `sys_user`,-->
             <!--`sys_dept`,-->
             <!--`sys_role`-->
        <!--WHERE `sys_user`.`deptid` = `sys_dept`.`id`-->
          <!--AND `sys_role`.`id` = `sys_user`.`roleid`-->
          <!--AND `id` = #{id}-->
    <!--</select>-->


    <!--<update id="updateUser" parameterType="com.beans.SysUser">-->
        <!--UPDATE `sys_user`-->
        <!--<set>-->
            <!--<if test="name!=null">-->
                <!--`name`= #{name},-->
            <!--</if>-->
            <!--<if test="account!=null">-->
                <!--`account`=#{account},-->
            <!--</if>-->
            <!--<if test="password!=null">-->
                <!--`password`= #{password},-->
            <!--</if>-->
            <!--<if test="sex!=0">-->
                <!--`sex`=#{sex},-->
            <!--</if>-->
            <!--<if test="IDnumber!=null">-->
                <!--`IDnumber`=#{IDnumber},-->
            <!--</if>-->
            <!--<if test="phone!=null">-->
                <!--`phone`= #{phone},-->
            <!--</if>-->
            <!--<if test="email!=null">-->
                <!--`email`=#{email},-->
            <!--</if>-->
            <!--<if test="companyid!=0">-->
                <!--`companyid`=#{companyid},-->
            <!--</if>-->
            <!--<if test="deptid!=0">-->
                <!--`deptid`=#{deptid},-->
            <!--</if>-->
            <!--<if test="roleid!=0">-->
                <!--`roleid`=#{roleid},-->
            <!--</if>-->
            <!--<if test="britherday!=null">-->
                <!--`britherday`= #{britherday},-->
            <!--</if>-->
            <!--<if test="account!=null">-->
                <!--`account`=#{account},-->
            <!--</if>-->
            <!--<if test="address!=null">-->
                <!--`address`= #{address},-->
            <!--</if>-->
            <!--<if test="certificate!=null">-->
                <!--`certificate`=#{certificate},-->
            <!--</if>-->
            <!--<if test="workphone!=null">-->
                <!--`workphone`=#{workphone},-->
            <!--</if>-->
            <!--<if test="QQ!=null">-->
                <!--`QQ`= #{QQ},-->
            <!--</if>-->
            <!--<if test="WeChat!=null">-->
                <!--`WeChat`=#{WeChat},-->
            <!--</if>-->
            <!--<if test="balance!=0">-->
                <!--`balance`=#{balance},-->
            <!--</if>-->
            <!--<if test="bankaccount1!=null">-->
                <!--`bankaccount1`=#{bankaccount1},-->
            <!--</if>-->
            <!--<if test="bank1!=null">-->
                <!--`bank1`=#{bank1},-->
            <!--</if>-->
            <!--<if test="bankaccount2!=null">-->
                <!--`bankaccount2`=#{bankaccount2},-->
            <!--</if>-->
            <!--<if test="bank2!=null">-->
                <!--`bank2`=#{bank2},-->
            <!--</if>-->
        <!--</set>-->
        <!--WHERE `id` = #{id}-->
    <!--</update>-->






</mapper>